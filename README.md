## SHOM‚Ä¢AIR ‚Äî –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω –∫—Ä–æ—Å—Å–æ–≤–æ–∫, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –Ω–∞ Django.  

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

- Django-–ø—Ä–æ–µ–∫—Ç —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `main` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–∞–π—Ç–∞
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `cart` ‚Äî –∫–æ—Ä–∑–∏–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `users` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –ø—Ä–æ—Ñ–∏–ª—å
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `orders` ‚Äî –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `payment` ‚Äî –ø–ª–∞—Ç–µ–∂ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- –ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –®–∞–±–ª–æ–Ω—ã —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º
- –ß–∞—Å—Ç–∏—á–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã (partials)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ static –∏ media —Ñ–∞–π–ª–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ `.env`
- –†–∞–±–æ—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å–≤—è–∑–∞–Ω–∞ —Å `PostgreSQL` (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)

---

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Shom-Air

üìÇ shop/                    # –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ üìÇ cart/                # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ templates/cart/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ cart_detail.html
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ cart.py          # –õ–æ–≥–∏–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ context_processors.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ forms.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ models.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ tests.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ views.py
‚îÇ
‚îú‚îÄ‚îÄ üìÇ main/                # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ static/main/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ css/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ style.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ js/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üìÑ size-select.js
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ templates/main/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ product/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ detail.html
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ list.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ base.html
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ models.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ tests.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ views.py
‚îÇ
‚îú‚îÄ‚îÄ üìÇ media/               # –º–µ–¥–∏–∞-—Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ üìÇ orders/              # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ templates/orders/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ partials/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ summary.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ checkout_content.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ checkout.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ empty_cart.html
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ forms.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ models.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ tests.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ views.py
‚îÇ
‚îú‚îÄ‚îÄ üìÇ payment/             # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã (Stripe)
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ templates/payment/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ stripe_cancel_content.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ stripe_cancel.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ stripe_success_content.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ stripe_success.html
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ models.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ tests.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ views.py
‚îÇ
‚îú‚îÄ‚îÄ üìÇ shop/                # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ asgi.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ settings.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ wsgi.py
‚îÇ
‚îú‚îÄ‚îÄ üìÇ users/               # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ templates/users/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ partials/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ account_details.html
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ edit_account_details.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ base.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ login.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ profile.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ register.html
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ admin.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ apps.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ forms.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ models.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ tests.py
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ views.py
‚îÇ
‚îú‚îÄ‚îÄ üìÑ .env                 # –§–∞–π–ª —Å —Å–µ–∫—Ä–µ—Ç–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏
‚îú‚îÄ‚îÄ üìÑ .env.example         # –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã .env
‚îú‚îÄ‚îÄ üìÑ .gitignore
‚îú‚îÄ‚îÄ üìÑ manage.py            # –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ üìÑ README.md
‚îî‚îÄ‚îÄ üìÑ requirements.txt     # –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

---

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞:

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
git clone https://github.com/muhammad-mirzoev/shom-air
cd shop
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
python -m venv venv
source venv/bin/activate   # Linux / Mac
venv\Scripts\activate      # Windows
```
### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```
python -m pip install -r requirements.txt
```
```
–°–æ–¥–µ—Ä–∂–∏–º–æ–µ requirements.txt:
---
asgiref==3.11.0
certifi==2026.1.4
charset-normalizer==3.4.4
Django==6.0
idna==3.11
pillow==12.0.0
psycopg2==2.9.11
python-dotenv==1.2.1
requests==2.32.5
sqlparse==0.5.5
stripe==14.2.0
typing_extensions==4.15.0
urllib3==2.6.3
---
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env (–ø—Ä–∏–º–µ—Ä –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ .env.example):
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL (—á–µ—Ä–µ–∑ psycopg2).
```
SECRET_KEY=
DEBUG=False

POSTGRES_DB=shopdb
POSTGRES_USER=shopdb
POSTGRES_PASSWORD=shopdb
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
```
### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
```
python manage.py migrate
```
### –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```
python manage.py createsuperuser
```
# –ê –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫
```
python manage.py runserver

–ò–ª–∏:
python3 manage.py runserver
```

---

# üí≥ Stripe –Ω–∞–π—Å—Ç—Ä–æ–π–∫–∞ 

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Stripe** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π. –ü–æ—Å–ª–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏. 

--- 

### 1. –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç Stripe –ï—Å–ª–∏ —É –≤–∞—Å –µ—â—ë –Ω–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞: - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ Stripe - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Stripe Dashboard** - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∫–ª—é—á—ë–Ω **Test mode** 


### 2. –ü–æ–ª—É—á–∏—Ç—å Secret API Key –í **Stripe Dashboard**: - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Developers ‚Üí API keys** - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Secret key (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å sk_) –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```env
.env:

STRIPE_SECRET_KEY=your_stripe_secret_key_here

settings:

STRIPE_SECRET_KEY = os.getenv('STRIPE_SECRET_KEY')
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Stripe CLI –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Stripe CLI** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å **webhooks** –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ. 

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Stripe CLI:** 

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –≤–∞—à–µ–π –û–° - https://stripe.com/docs/stripe-cli 

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Stripe:**
```
–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

stripe login

–û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ç–µ—Ä–º–∏–Ω–∞–ª/–∫–æ–Ω—Å–æ–ª—å –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Stripe.
```

### 4. –ó–∞–ø—É—Å–∫ Webhook listener **–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è webhook-—Å–æ–±—ã—Ç–∏–π –æ—Ç Stripe –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:**
```
payment/views.py:

stripe listen --forward-to localhost:8000/payment/stripe/webhook/
```

**–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ CLI –≤—ã–≤–µ–¥–µ—Ç Webhook Signing Secret, –Ω–∞–ø—Ä–∏–º–µ—Ä:**
```
your_stripe_webhook_secret_key_here
```

**–î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ .env —Ñ–∞–π–ª, –∞ –∑–∞—Ç–µ–º –≤ settings.py:**
```
.env:

STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret_key_here

settings.py:

STRIPE_WEBHOOK_SECRET = os.getenv('STRIPE_WEBHOOK_SECRET')
```
### –í –∏—Ç–æ–≥–µ —É –≤–∞—Å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–æ—Ç —Ç–∞–∫:
```
settings.py:

STRIPE_SECRET_KEY = os.getenv('STRIPE_SECRET_KEY')
STRIPE_WEBHOOK_SECRET = os.getenv('STRIPE_WEBHOOK_SECRET')

.env -> –≤–∞—à –∫–ª—é—á:
–Ω–∞–ø—Ä–∏–º–µ—Ä:

STRIPE_SECRET_KEY=your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret_key_here
```

### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ **–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞ webhook listener –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
```
–ø—Ä–∏–º–µ—Ä –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ 
npm run dev

# –∏–ª–∏
python manage.py runserver

(–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–∞—à–µ–º—É)
```